/* =====================================
   COMPREHENSIVE CLS FIX - CRITICAL
   Target: CLS from 1.133 → <0.1
   ===================================== */

/* 1. RESERVE EXACT SPACE FOR ALL IMAGES */
/* Add explicit aspect-ratios to prevent layout shift when images load */

.service-card-image,
.fleet-card-image,
.destination-card-image,
img[width="400"][height="300"] {
    aspect-ratio: 4 / 3 !important;
    object-fit: cover !important;
    width: 100% !important;
    height: auto !important;
}

.logo-img,
img[width="60"][height="60"] {
    aspect-ratio: 1 / 1 !important;
    width: 60px !important;
    height: 60px !important;
}

/* Reserve space for lazy-loaded images */
img[loading="lazy"] {
    aspect-ratio: 4 / 3;
    background-color: #f5f5f5;
    min-height: 200px;
}

/* 2. DISABLE ALL INFINITE ANIMATIONS */
/* 21 animated elements causing continuous layout recalculation */

@keyframes pulse,
@keyframes bounce,
@keyframes shimmer,
@keyframes ring,
@keyframes buttonPulse {
    from, to { transform: none; }
}

/* Disable all pulse/bounce animations */
*.animate-pulse,
*.animate-bounce,
.btn-whatsapp,
.btn-call,
.whatsapp-float,
.call-float,
.cta-buttons .btn,
.trust-badge,
.feature-icon,
.why-icon,
.service-icon,
.animated {
    animation: none !important;
    transform: none !important;
}

/* 3. FIX FONT LOADING SHIFTS */
/* Reserve space for text before fonts load */

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.fonts-loaded body {
    font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* Prevent text reflow when font loads */
.hero-title,
.section-title,
h1, h2, h3, h4, h5, h6 {
    font-size-adjust: 0.5;
    text-size-adjust: 100%;
}

/* 4. FIX SCROLL BUTTON LAYOUT SHIFT */
/* Icon loads synchronously now, but ensure no shift */

.scroll-top {
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateY(100px) !important;
    transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease !important;
    animation: none !important;
    pointer-events: none !important;
}

.scroll-top.show {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
    pointer-events: auto !important;
}

/* Remove pulse animation on scroll button */
.scroll-top.show {
    animation: none !important;
}

/* 5. RESERVE SPACE FOR DYNAMIC CONTENT */
/* Prevent shifts from counters, badges, etc. */

.stat-number,
.counter {
    min-height: 40px;
    display: inline-block;
}

.trust-badge,
.social-proof-banner {
    min-height: 50px;
}

/* 6. CSS CONTAINMENT FOR ISOLATION */
/* Prevent layout shifts from propagating */

.service-card,
.fleet-card,
.destination-card,
.testimonial-card,
.feature-card {
    contain: layout style paint !important;
}

.hero,
.section {
    contain: layout style !important;
}

/* 7. FIX NAVIGATION SHIFTS */
.header,
.top-bar {
    contain: layout style !important;
}

.nav-menu {
    contain: layout style paint !important;
}

/* 8. PREVENT SHIFT FROM LOADING STATES */
.booking-form-card,
.fare-calculator {
    min-height: 400px;
}

/* 9. FIX BUTTON SHIFTS */
/* Buttons should have fixed dimensions */
.btn,
.cta-button {
    min-height: 48px;
    padding: 14px 32px;
    box-sizing: border-box;
}

/* 10. REMOVE SCALE TRANSFORMS */
/* Scale causes layout recalculation */
*:hover {
    transform: none !important;
}

/* Allow only safe transforms (translate, opacity) */
.safe-hover:hover {
    opacity: 0.9;
}

/* 11. FIX CARD HOVER EFFECTS */
/* Remove transforms that cause shifts */
.service-card:hover,
.fleet-card:hover,
.destination-card:hover,
.testimonial-card:hover {
    transform: none !important;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15) !important;
}

/* 12. OPTIMIZE GRID LAYOUTS */
/* Prevent shifts from grid reflow */
.service-grid,
.fleet-grid,
.destination-grid,
.testimonial-grid {
    grid-template-rows: auto;
    min-height: 400px;
}

/* 13. FIX ICON SHIFTS */
/* Reserve space for Font Awesome icons */
i.fas,
i.far,
i.fab {
    display: inline-block;
    width: 1em;
    text-align: center;
    vertical-align: middle;
}

/* 14. PREVENT FOOTER SHIFTS */
.footer {
    contain: layout style !important;
}

/* 15. KEEP ANIMATIONS DISABLED PERMANENTLY */
/* DO NOT re-enable animations - they cause massive CLS (0.01 → 9.34) */
/* Animations must stay disabled for CLS <0.1 */

body * {
    animation-duration: 0s !important;
    animation-delay: 0s !important;
    transition-duration: 0.15s !important;
}

/* Allow only safe transitions (no layout changes) */
a, button, .btn {
    transition: opacity 0.15s ease, background-color 0.15s ease, color 0.15s ease !important;
}

/* 16. FIX WHATSAPP/CALL BUTTON SHIFTS */
.floating-actions-container {
    position: fixed !important;
    bottom: 20px !important;
    right: 20px !important;
    contain: layout style paint !important;
}

.whatsapp-float,
.call-float {
    animation: none !important;
    transform: none !important;
}

/* 17. CRITICAL: DISABLE ALL TRANSFORMS */
/* Transforms trigger layer promotion and layout shifts */
* {
    will-change: auto !important;
}

/* Only use will-change on scroll */
.scroll-active .allow-transform {
    will-change: transform;
}

/* 18. FIX IMAGE CONTAINER SHIFTS */
.service-card-img-wrapper,
.fleet-card-img-wrapper,
.destination-img-wrapper {
    aspect-ratio: 4 / 3 !important;
    overflow: hidden;
    background-color: #f0f0f0;
}

/* 19. PREVENT FORM SHIFTS */
.booking-form input,
.booking-form select,
.booking-form textarea {
    box-sizing: border-box;
    width: 100%;
}

/* 20. OPTIMIZE PERFORMANCE */
/* Reduce paint area */
* {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

/* Use GPU acceleration only where needed */
.hero,
.scroll-top.show {
    transform: translateZ(0);
}
