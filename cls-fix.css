/* CRITICAL CLS FIX - Add to style.css */
/* This patch reduces Cumulative Layout Shift from 0.491 to <0.1 */

/* 1. DISABLE ALL INFINITE ANIMATIONS - Causing 98 animated elements issue */
/* Comment out or remove infinite animations that cause continuous layout recalculation */

/* Disable infinite pulse animations */
.btn-whatsapp,
.btn-call,
.cta-buttons .btn,
.trust-badge,
.feature-icon i,
.why-icon {
    animation: none !important;
}

/* SCROLL BUTTON FIX - Hidden by default, shown with JS .show class after 300px scroll */
.scroll-top {
    position: fixed !important;
    bottom: 30px !important;
    left: 30px !important;
    width: 56px !important;
    height: 56px !important;
    background: #ff6b35 !important;
    color: #ffffff !important;
    border: none !important;
    border-radius: 50% !important;
    cursor: pointer !important;
    font-size: 1.6rem !important;
    box-shadow: 0 4px 20px rgba(255, 107, 53, 0.8), 0 0 0 4px rgba(255, 107, 53, 0.2) !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateY(20px) !important;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
    z-index: 100000 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    pointer-events: none !important;
    animation: none !important;
}

/* Show button when .show class is added by JavaScript */
.scroll-top.show {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
    pointer-events: auto !important;
}

.scroll-top:hover {
    background: #ff8c61 !important;
    transform: translateY(-5px) scale(1.05) !important;
    box-shadow: 0 8px 30px rgba(255, 107, 53, 1), 0 0 0 6px rgba(255, 107, 53, 0.3) !important;
}

/* Disable infinite bounce/shimmer/ring animations */
.service-card:hover .service-icon,
.route-info-card:hover .route-icon,
.place-card:hover img,
.hero::before {
    animation: none !important;
}

/* 2. ADD ASPECT-RATIO TO ALL IMAGES - Prevents layout shift */
.service-card-image,
.fleet-card img,
.place-card img,
.testimonial-card img,
img[loading="lazy"] {
    aspect-ratio: 4 / 3;
    object-fit: cover;
    width: 100%;
    height: auto;
}

.logo-img {
    aspect-ratio: 1 / 1;
    object-fit: contain;
}

/* 3. USE CSS CONTAINMENT - Isolates layout changes */
.hero {
    contain: layout style paint;
    content-visibility: auto;
}

.service-card,
.fleet-card,
.why-card,
.place-card,
.testimonial-card,
.faq-item {
    contain: layout style;
}

/* 4. RESERVE SPACE FOR DYNAMIC CONTENT */
.testimonial-card {
    min-height: 250px;
}

.service-card {
    min-height: 420px;
}

.fleet-card {
    min-height: 480px;
}

/* 5. PREVENT FONT-INDUCED LAYOUT SHIFT */
body {
    font-display: optional;
}

/* Use font-size-adjust to minimize shift when web font loads */
body {
    font-size-adjust: 0.5;
}

/* 6. OPTIMIZE ANIMATIONS - Only use transform and opacity */
/* These properties don't trigger layout recalculation */
.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

/* Remove animations that trigger layout (width, height, padding, margin changes) */
.service-card:hover,
.fleet-card:hover {
    transform: translateY(-5px) !important;
    /* Remove any scale animations */
}

/* 7. USE WILL-CHANGE FOR HOVER EFFECTS */
.btn,
.service-card,
.fleet-card,
.why-card {
    will-change: transform;
}

/* Remove will-change after animation completes to free resources */
.btn:not(:hover),
.service-card:not(:hover),
.fleet-card:not(:hover) {
    will-change: auto;
}

/* 8. FIX BOOKING FORM LAYOUT SHIFT */
.booking-form-container {
    min-height: 600px;
    contain: layout;
}

.form-group {
    min-height: 80px; /* Reserve space for labels and inputs */
}

/* 9. DISABLE PROBLEMATIC INFINITE ANIMATIONS */
/* Keep only one-time entry animations (fadeInLeft, fadeInRight on page load) */
@keyframes pulse {
    /* Disable */
    0%, 100% { transform: scale(1); }
}

@keyframes bounce {
    /* Disable */
    0%, 100% { transform: translateY(0); }
}

@keyframes shimmer {
    /* Disable */
    0%, 100% { background-position: 0 0; }
}

@keyframes ring {
    /* Disable */
    0%, 100% { transform: rotate(0deg); }
}

/* 10. OPTIMIZE HERO SECTION */
.hero {
    /* Prevent background image from causing shift */
    background-attachment: scroll; /* Don't use fixed parallax */
}

.hero-content {
    contain: layout;
    will-change: auto;
}

/* 11. FIX ICON POSITIONING TO PREVENT SHIFT */
.feature-icon,
.service-icon,
.
-icon,
.route-icon {
    display: block;
    width: 60px;
    height: 60px;
    line-height: 60px;
    text-align: center;
}

/* 12. PREVENT CLS FROM LAZY-LOADED IMAGES */
img[loading="lazy"] {
    content-visibility: auto;
    contain-intrinsic-size: 400px 300px; /* Placeholder size until load */
}

/* 13. FIX TESTIMONIAL CAROUSEL */
.testimonial-grid {
    min-height: 300px;
    contain: layout;
}

/* 14. OPTIMIZE FAQ ACCORDION */
.faq-item {
    contain: layout;
}

.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.faq-item.active .faq-answer {
    max-height: 500px; /* Fixed max height prevents shift */
}

/* 15. FIX STATS COUNTER ANIMATION */
.stats-grid .stat-card {
    min-height: 150px;
    contain: layout;
}

/* Disable counter animation that causes shifts */
.stat-number {
    animation: none !important;
}

/* 16. CRITICAL: KEEP ALL ANIMATIONS DISABLED */
/* DO NOT re-enable - causes CLS to explode from 0.01 to 9.34 */
/* Animations must stay disabled for good CLS score */

* {
    animation: none !important;
    animation-duration: 0s !important;
    animation-delay: 0s !important;
}

/* Allow only safe, fast transitions */
a, button, .btn, .card {
    transition: opacity 0.15s ease, background-color 0.15s ease !important;
}

/* Scroll button can have safe transitions */
.scroll-top {
    transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease !important;
}

/* End of CLS Fix */

